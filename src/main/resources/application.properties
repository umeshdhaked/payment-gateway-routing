spring.application.name=platinumrx

# PostgreSQL Write DataSource (Master via pgbouncer)
spring.datasource.write.jdbcUrl=jdbc:postgresql://localhost:6432/platinumrx
spring.datasource.write.username=postgres
spring.datasource.write.password=postgres
spring.datasource.write.driver-class-name=org.postgresql.Driver

# PostgreSQL Read DataSource (Currently using master - ready for replica when available)
# To use a read replica, update this URL to point to the replica pgbouncer instance
spring.datasource.read.jdbcUrl=jdbc:postgresql://localhost:6432/platinumrx
spring.datasource.read.username=postgres
spring.datasource.read.password=postgres
spring.datasource.read.driver-class-name=org.postgresql.Driver

# HikariCP Connection Pool Settings
spring.datasource.hikari.maximum-pool-size=20
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000
spring.datasource.hikari.pool-name=PlatinumRxHikariPool

# JPA/Hibernate Settings
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.jdbc.batch_size=20
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true

# Redis Configuration
spring.data.redis.host=localhost
spring.data.redis.port=6379
spring.data.redis.password=
spring.data.redis.timeout=2000ms
spring.data.redis.lettuce.pool.max-active=20
spring.data.redis.lettuce.pool.max-idle=10
spring.data.redis.lettuce.pool.min-idle=5
spring.data.redis.lettuce.pool.max-wait=-1ms

# 30 minute cooldown for temp disabled gateways
gateway.temp-disable-duration-seconds=1800

# 15 minute window for calculating success rate
gateway.stats.window-duration-seconds=900

# Minimum success rate to enable a gateway
gateway.min-success-threshold=0.9
